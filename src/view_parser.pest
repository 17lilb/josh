WHITESPACE = _{ " " | "\t" }
CMD_START = _{(":"|"!")}
CMD_END = _{("="|"/")}


view = { transform* }

transform = { CMD_START ~ cmd ~ CMD_END ~ argument }

argument = { (!(CMD_START | "\n") ~ ANY)+ }

cmd = { (!(CMD_END | "\n") ~ ANY)* }

viewfile = { "\n"* ~ file_entry ~ ("\n"+ ~ file_entry)* }

file_entry = { dst_path ~ "=" ~ view }

dst_path = @{ (!("=" | WHITESPACE) ~ ANY)+ }
